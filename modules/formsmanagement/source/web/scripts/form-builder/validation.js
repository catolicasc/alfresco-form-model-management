/*
	Masked Input plugin for jQuery
	Copyright (c) 2007-2011 Josh Bush (digitalbush.com)
	Licensed under the MIT license (http://digitalbush.com/projects/masked-input-plugin/#license)
	Version: 1.3
*/
(function(a){var b=(a.browser.msie?"paste":"input")+".mask",c=window.orientation!=undefined;a.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn"},a.fn.extend({caret:function(a,b){if(this.length!=0){if(typeof a=="number"){b=typeof b=="number"?b:a;return this.each(function(){if(this.setSelectionRange)this.setSelectionRange(a,b);else if(this.createTextRange){var c=this.createTextRange();c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",a),c.select()}})}if(this[0].setSelectionRange)a=this[0].selectionStart,b=this[0].selectionEnd;else if(document.selection&&document.selection.createRange){var c=document.selection.createRange();a=0-c.duplicate().moveStart("character",-1e5),b=a+c.text.length}return{begin:a,end:b}}},unmask:function(){return this.trigger("unmask")},mask:function(d,e){if(!d&&this.length>0){var f=a(this[0]);return f.data(a.mask.dataName)()}e=a.extend({placeholder:"_",completed:null},e);var g=a.mask.definitions,h=[],i=d.length,j=null,k=d.length;a.each(d.split(""),function(a,b){b=="?"?(k--,i=a):g[b]?(h.push(new RegExp(g[b])),j==null&&(j=h.length-1)):h.push(null)});return this.trigger("unmask").each(function(){function v(a){var b=f.val(),c=-1;for(var d=0,g=0;d<k;d++)if(h[d]){l[d]=e.placeholder;while(g++<b.length){var m=b.charAt(g-1);if(h[d].test(m)){l[d]=m,c=d;break}}if(g>b.length)break}else l[d]==b.charAt(g)&&d!=i&&(g++,c=d);if(!a&&c+1<i)f.val(""),t(0,k);else if(a||c+1>=i)u(),a||f.val(f.val().substring(0,c+1));return i?d:j}function u(){return f.val(l.join("")).val()}function t(a,b){for(var c=a;c<b&&c<k;c++)h[c]&&(l[c]=e.placeholder)}function s(a){var b=a.which,c=f.caret();if(a.ctrlKey||a.altKey||a.metaKey||b<32)return!0;if(b){c.end-c.begin!=0&&(t(c.begin,c.end),p(c.begin,c.end-1));var d=n(c.begin-1);if(d<k){var g=String.fromCharCode(b);if(h[d].test(g)){q(d),l[d]=g,u();var i=n(d);f.caret(i),e.completed&&i>=k&&e.completed.call(f)}}return!1}}function r(a){var b=a.which;if(b==8||b==46||c&&b==127){var d=f.caret(),e=d.begin,g=d.end;g-e==0&&(e=b!=46?o(e):g=n(e-1),g=b==46?n(g):g),t(e,g),p(e,g-1);return!1}if(b==27){f.val(m),f.caret(0,v());return!1}}function q(a){for(var b=a,c=e.placeholder;b<k;b++)if(h[b]){var d=n(b),f=l[b];l[b]=c;if(d<k&&h[d].test(f))c=f;else break}}function p(a,b){if(!(a<0)){for(var c=a,d=n(b);c<k;c++)if(h[c]){if(d<k&&h[c].test(l[d]))l[c]=l[d],l[d]=e.placeholder;else break;d=n(d)}u(),f.caret(Math.max(j,a))}}function o(a){while(--a>=0&&!h[a]);return a}function n(a){while(++a<=k&&!h[a]);return a}var f=a(this),l=a.map(d.split(""),function(a,b){if(a!="?")return g[a]?e.placeholder:a}),m=f.val();f.data(a.mask.dataName,function(){return a.map(l,function(a,b){return h[b]&&a!=e.placeholder?a:null}).join("")}),f.attr("readonly")||f.one("unmask",function(){f.unbind(".mask").removeData(a.mask.dataName)}).bind("focus.mask",function(){m=f.val();var b=v();u();var c=function(){b==d.length?f.caret(0,b):f.caret(b)};(a.browser.msie?c:function(){setTimeout(c,0)})()}).bind("blur.mask",function(){v(),f.val()!=m&&f.change()}).bind("keydown.mask",r).bind("keypress.mask",s).bind(b,function(){setTimeout(function(){f.caret(v(!0))},0)}),v()})}})})(jQuery)

/*  Form builder validation
    Copyright (c) 2011 Mike Priest (Abstractive)
	Licensed under the MIT license
	Version: 1.0.0 (21/11/2011 11:13:06)
*/
/*
 * --------------------------------------------------------------------
 * jQuery-Plugin - selectToUISlider - creates a UI slider component from a select element(s)
 * by Scott Jehl, scott@filamentgroup.com
 * http://www.filamentgroup.com
 * reference article: http://www.filamentgroup.com/lab/update_jquery_ui_16_slider_from_a_select_element/
 * demo page: http://www.filamentgroup.com/examples/slider_v2/index.html
 *
 * Copyright (c) 2008 Filament Group, Inc
 * Dual licensed under the MIT (filamentgroup.com/examples/mit-license.txt) and GPL (filamentgroup.com/examples/gpl-license.txt) licenses.
 *
 * Usage Notes: please refer to our article above for documentation
 *
 * --------------------------------------------------------------------
 */
jQuery.fn.selectToUISlider=function(settings){var selects=jQuery(this);var options=jQuery.extend({labels:3,tooltip:true,tooltipSrc:"text",labelSrc:"value",sliderOptions:null},settings);var handleIds=(function(){var tempArr=[];selects.each(function(){tempArr.push("handle_"+jQuery(this).attr("id"));});return tempArr;})();var selectOptions=(function(){var opts=[];selects.eq(0).find("option").each(function(){opts.push({value:jQuery(this).attr("value"),text:jQuery(this).text()});});return opts;})();var groups=(function(){if(selects.eq(0).find("optgroup").size()>0){var groupedData=[];selects.eq(0).find("optgroup").each(function(i){groupedData[i]={};groupedData[i].label=jQuery(this).attr("label");groupedData[i].options=[];jQuery(this).find("option").each(function(){groupedData[i].options.push({text:jQuery(this).text(),value:jQuery(this).attr("value")});});});return groupedData;}else{return null;}})();function isArray(obj){return obj.constructor==Array;}function ttText(optIndex){return(options.tooltipSrc=="text")?selectOptions[optIndex].text:selectOptions[optIndex].value;}var sliderOptions={step:1,min:0,orientation:"horizontal",max:selectOptions.length-1,range:selects.length>1,slide:function(e,ui){var thisHandle=jQuery(ui.handle);var textval=ttText(ui.value);thisHandle.attr("aria-valuetext",textval).attr("aria-valuenow",ui.value).find(".ui-slider-tooltip .ttContent").text(textval);var currSelect=jQuery("#"+thisHandle.attr("id").split("handle_")[1]);currSelect.find("option").eq(ui.value).attr("selected","selected");},values:(function(){var values=[];selects.each(function(){values.push(jQuery(this).get(0).selectedIndex);});return values;})()};options.sliderOptions=(settings)?jQuery.extend(sliderOptions,settings.sliderOptions):sliderOptions;selects.bind("change keyup click",function(){var thisIndex=jQuery(this).get(0).selectedIndex;var thisHandle=jQuery("#handle_"+jQuery(this).attr("id"));var handleIndex=thisHandle.data("handleNum");thisHandle.parents(".ui-slider:eq(0)").slider("values",handleIndex,thisIndex);});var sliderComponent=jQuery("<div></div>");selects.each(function(i){var hidett="";var thisLabel=jQuery("label[for="+jQuery(this).attr("id")+"]");var labelText=(thisLabel.size()>0)?"Slider control for "+thisLabel.text()+"":"";var thisLabelId=thisLabel.attr("id")||thisLabel.attr("id","label_"+handleIds[i]).attr("id");if(options.tooltip==false){hidett=' style="display: none;"';}jQuery("<a "+'href="#" tabindex="0" '+'id="'+handleIds[i]+'" '+'class="ui-slider-handle" '+'role="slider" '+'aria-labelledby="'+thisLabelId+'" '+'aria-valuemin="'+options.sliderOptions.min+'" '+'aria-valuemax="'+options.sliderOptions.max+'" '+'aria-valuenow="'+options.sliderOptions.values[i]+'" '+'aria-valuetext="'+ttText(options.sliderOptions.values[i])+'" '+'><span class="screenReaderContext">'+labelText+"</span>"+'<span class="ui-slider-tooltip ui-widget-content ui-corner-all"'+hidett+'><span class="ttContent"></span>'+'<span class="ui-tooltip-pointer-down ui-widget-content"><span class="ui-tooltip-pointer-down-inner"></span></span>'+"</span></a>").data("handleNum",i).appendTo(sliderComponent);});if(groups){var inc=0;var scale=sliderComponent.append('<dl class="ui-slider-scale ui-helper-reset" role="presentation"></dl>').find(".ui-slider-scale:eq(0)");jQuery(groups).each(function(h){scale.append('<dt style="width: '+(100/groups.length).toFixed(2)+"%"+"; left:"+(h/(groups.length-1)*100).toFixed(2)+"%"+'"><span>'+this.label+"</span></dt>");var groupOpts=this.options;jQuery(this.options).each(function(i){var style=(inc==selectOptions.length-1||inc==0)?'style="display: none;"':"";var labelText=(options.labelSrc=="text")?groupOpts[i].text:groupOpts[i].value;scale.append('<dd style="left:'+leftVal(inc)+'"><span class="ui-slider-label">'+labelText+'</span><span class="ui-slider-tic ui-widget-content"'+style+"></span></dd>");inc++;});});}else{var scale=sliderComponent.append('<ol class="ui-slider-scale ui-helper-reset" role="presentation"></ol>').find(".ui-slider-scale:eq(0)");jQuery(selectOptions).each(function(i){var style=(i==selectOptions.length-1||i==0)?'style="display: none;"':"";var labelText=(options.labelSrc=="text")?this.text:this.value;scale.append('<li style="left:'+leftVal(i)+'"><span class="ui-slider-label">'+labelText+'</span><span class="ui-slider-tic ui-widget-content"'+style+"></span></li>");});}function leftVal(i){return(i/(selectOptions.length-1)*100).toFixed(2)+"%";}if(options.labels>1){sliderComponent.find(".ui-slider-scale li:last span.ui-slider-label, .ui-slider-scale dd:last span.ui-slider-label").addClass("ui-slider-label-show");}var increm=Math.max(1,Math.round(selectOptions.length/options.labels));for(var j=0;j<selectOptions.length;j+=increm){if((selectOptions.length-j)>increm){sliderComponent.find(".ui-slider-scale li:eq("+j+") span.ui-slider-label, .ui-slider-scale dd:eq("+j+") span.ui-slider-label").addClass("ui-slider-label-show");}}sliderComponent.find(".ui-slider-scale dt").each(function(i){jQuery(this).css({"left":((100/(groups.length))*i).toFixed(2)+"%"});});sliderComponent.insertAfter(jQuery(this).eq(this.length-1)).slider(options.sliderOptions).attr("role","application").find(".ui-slider-label").each(function(){jQuery(this).css("marginLeft",-jQuery(this).width()/2);});sliderComponent.find(".ui-tooltip-pointer-down-inner").each(function(){var bWidth=jQuery(".ui-tooltip-pointer-down-inner").css("borderTopWidth");var bColor=jQuery(this).parents(".ui-slider-tooltip").css("backgroundColor");jQuery(this).css("border-top",bWidth+" solid "+bColor);});var values=sliderComponent.slider("values");if(isArray(values)){jQuery(values).each(function(i){sliderComponent.find(".ui-slider-tooltip .ttContent").eq(i).text(ttText(this));});}else{sliderComponent.find(".ui-slider-tooltip .ttContent").eq(0).text(ttText(values));}return this;};

/*
   Alfresco form management validation
   Author: Mike Priest
   Copyright (c) MPT Mozilla Public License

*/
$(function(){$(".sliderForm").each(function(){var value=parseInt($(this).text(),10);$(this).empty().slider({value:5,min:0,range:"min",max:10,step:1,slide:function(event,ui){$(this).parents(".group").find(".slider-value:eq(0)").val(ui.value);}});});$(".slider-value").val("5");$(".frm_submit").live("click",function(){return validateForm($(".fm-doctypes"));});$(".numOnly").live("keydown",function(e){if(e.which!=9&&e.which!=8&&e.which!=46&&e.which!=37&&e.which!=190&&e.which!=110&&e.which!=39&&e.which!=0&&(!((e.which>=48&&e.which<=57)||(e.which<=105&&e.which>=96)))){return false;}});$(".alphanumOnly").live("keyup",function(){if(this.value.match(/[^a-zA-Z0-9 ]/g)){this.value=this.value.replace(/[^a-zA-Z0-9 ]/g,"");}});$(".currency").livequery("blur",function(e){$(this).val(formatCurrency($(this).val()));});});function setMasks(){$(".date").mask("9999-99-99").datepicker({"dateFormat":"yy-mm-dd",changeMonth:true,changeYear:true});$(".phn").mask("99999-9999");$(".phone").mask("(999) 999-9999");$(".sin").mask("999-999-999");$(".phoneext").mask("(999) 999-9999? x99999");$(".postcode").mask("a9a 9a9");$(".isOtherExp").each(function(){var thisId=$(this).attr("regex");if(thisId){var thisMask=thisId;$(this).mask(thisMask);}});}function formatCurrency(num){num=num.toString().replace(/\$|\,/g,"");if(isNaN(num)){num="0";}sign=(num==(num=Math.abs(num)));num=Math.floor(num*100+0.50000000001);cents=num%100;num=Math.floor(num/100).toString();if(cents<10){cents="0"+cents;}for(var i=0;i<Math.floor((num.length-(1+i))/3);i++){num=num.substring(0,num.length-(4*i+3))+","+num.substring(num.length-(4*i+3));}return(((sign)?"":"-")+"$"+num+"."+cents);}function validateForm(wrapper){var form=wrapper.find("form");var li="";form.find(".errHandleBox ul").html("");form.find(".errHandleBox").hide();form.find(".frmErr").removeClass("frmErr");var frmValid=true;form.find(".required").each(function(){if($(this).val().length<1||$(this).val()=="-Select-"||$(this).val()=="- select-"||$(this).val()=="select"){$(this).addClass("frmErr");frmValid=false;}});if(!frmValid){li+="<li>Please check all required fields</li>";}form.find(" .verification").each(function(){var vVal=$(this);var cVal=$(this).parents(".group").next().find(".verification-check");var label=$(this).parents(".group").children("label");if(vVal.val()!=cVal.val()){vVal.addClass("frmErr");cVal.addClass("frmErr");li+="<li>"+label.html()+" fields did not match. Please verify</li>";frmValid=false;}});form.find(" .frm-fld").each(function(){var minLength=parseInt($(this).attr("minlength"));var maxLength=parseInt($(this).attr("maxlength"));var thisLength=$(this).val().length;var label=$(this).parents(".group").children("label");if(isNaN(minLength)==false&&minLength>1&&minLength<51&&minLength!=0){if(thisLength>=minLength){}else{frmValid=false;li+="<li>"+label.html()+" requires a minimum value of "+minLength+"</li>";label.addClass("frmErr");}}if(isNaN(maxLength)==false&&maxLength>1&&maxLength<51&&maxLength!=0){if(thisLength>=maxLength){}else{frmValid=false;li+="<li>"+label.html()+" requires a maximum value of "+maxLength+"</li>";label.addClass("frmErr");}}});if(!frmValid){form.find(" .errHandleBox").show();form.find(" .errHandleBox ul").append(li);return false;}return true;}